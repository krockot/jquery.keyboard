(function(d){d.Keys={Break:3,Backspace:8,Tab:9,FormFeed:12,Enter:13,Shift:16,Control:17,Alt:18,Pause:19,CapsLock:20,Escape:27,Space:32,PageUp:33,PageDown:34,End:35,Home:36,LeftArrow:37,UpArrow:38,RightArrow:39,DownArrow:40,Insert:45,Delete:46,Key0:48,Key1:49,Key2:50,Key3:51,Key4:52,Key5:53,Key6:54,Key7:55,Key8:56,Key9:57,KeyA:65,KeyB:66,KeyC:67,KeyD:68,KeyE:69,KeyF:70,KeyG:71,KeyH:72,KeyI:73,KeyJ:74,KeyK:75,KeyL:76,KeyM:77,KeyN:78,KeyO:79,KeyP:80,KeyQ:81,KeyR:82,KeyS:83,KeyT:84,KeyU:85,KeyV:86,KeyW:87,KeyX:88,KeyY:89,KeyZ:90,NumPad0:96,NumPad1:97,NumPad2:98,NumPad3:99,NumPad4:100,NumPad5:101,NumPad6:102,NumPad7:103,NumPad8:104,NumPad9:105,NumPadTimes:106,NumPadPlus:107,NumPadMinus:109,NumPadDecimal:110,NumPadDivide:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NumLock:144,ScrollLock:145,Semicolon:186,Equals:187,Comma:188,Minus:189,Period:190,Slash:191,Grave:192,LeftBracket:219,Backslash:220,RightBracket:221,Quote:222};d.KeyNames={};for(var c in d.Keys){d.KeyNames[d.Keys[c]]=c}var b=d.Keys;var a={fn:function(f){return false},lastKeydown:{},keydownSent:false,firstKeypress:false,registered:false};d.fn.keyboard=function(e){a.fn=e;if(!a.registered){this.keydown(a.onKeydown);this.keypress(a.onKeypress);a.registered=true}};a.onKeydown=function(f){var g={ctrl:f.ctrlKey,shift:f.shiftKey,alt:f.altKey,key:f.keyCode,chr:null};a.lastKeydown=g;a.firstKeypress=true;if(g.ctrl||g.alt){a.keydownSent=true;return a.fn(g)}switch(g.key){case b.Control:case b.Alt:case b.Shift:case b.FormFeed:case b.Tab:case b.Backspace:case b.CapsLock:case b.NumLock:case b.ScrollLock:case b.Escape:case b.Home:case b.End:case b.PageUp:case b.PageDown:case b.Insert:case b.Delete:case b.F1:case b.F2:case b.F3:case b.F4:case b.F5:case b.F6:case b.F7:case b.F8:case b.F9:case b.F10:case b.F11:case b.F12:case b.LeftArrow:case b.UpArrow:case b.RightArrow:case b.DownArrow:case b.Break:case b.Pause:case b.Enter:case b.Space:a.keydownSent=true;return a.fn(g);default:a.keydownSent=false;return true}};a.onKeypress=function(f){var g={ctrl:f.ctrlKey,shift:f.shiftKey,alt:f.altKey,key:f.keyCode,chr:null};var h=a.firstKeypress;a.firstKeypress=false;if(h&&a.keydownSent){return false}if(!a.keydownSent){if(f.keyCode==0){g.chr=String.fromCharCode(f.charCode)}else{if(f.which==0){g.chr=null}else{if(typeof(f.charCode)!="undefined"&&f.charCode>0){g.chr=String.fromCharCode(f.charCode)}else{if(typeof(f.charCode)=="undefined"){g.chr=String.fromCharCode(f.which)}}}}}g.key=a.lastKeydown.key;return a.fn(g)}})(jQuery);